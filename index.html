<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒèªç±³å¯µç‰©ç¾å®¹é ç´„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-coral: #F28C8C; /* çŠç‘šç²‰ */
            --soft-pink: #FFF0F2;     /* æ«»èŠ±ç²‰ */
            --warm-cream: #FFF9E6;    /* å¥¶æ²¹é»ƒ */
            --warm-brown: #6D4C41;    /* æš–æ£•è‰² */
        }

        body {
            background-color: var(--soft-pink);
            color: var(--warm-brown);
            font-family: "Microsoft JhengHei", "Segoe UI", sans-serif;
            padding-bottom: 50px;
        }

        .form-container {
            background-color: #fff;
            border-radius: 25px;
            box-shadow: 0 8px 20px rgba(242, 140, 140, 0.2);
            padding: 40px; /* é›»è…¦ç‰ˆç•™ç™½ */
            margin-top: 30px;
            border: 3px solid var(--primary-coral);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        h2 {
            color: var(--primary-coral);
            font-weight: 800;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        h4 {
            color: var(--warm-brown);
            border-left: 5px solid var(--primary-coral);
            padding-left: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .form-label {
            font-weight: bold;
            color: var(--warm-brown);
            margin-top: 5px;
        }

        /* è¼¸å…¥æ¡†æ¨£å¼ */
        .form-control, .form-select {
            background-color: var(--warm-cream);
            border: 2px solid #FAD0C4;
            color: var(--warm-brown);
            border-radius: 12px;
            padding: 10px; /* å¢åŠ ä¸€é»é«˜åº¦è®“æ‰‹æ©Ÿå¥½é» */
        }

        .form-control:focus, .form-select:focus {
            background-color: #fff;
            border-color: var(--primary-coral);
            box-shadow: 0 0 8px rgba(242, 140, 140, 0.4);
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn-submit {
            background-color: var(--primary-coral);
            color: white;
            font-weight: 900;
            letter-spacing: 1px;
            padding: 15px 50px; /* æŒ‰éˆ•åŠ å¤§ */
            border: none;
            border-radius: 50px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(242, 140, 140, 0.4);
            width: 100%; /* è®“æŒ‰éˆ•å¯¬åº¦æ’æ»¿å®¹å™¨ */
            margin-top: 20px;
            font-size: 1.1rem;
        }

        .btn-submit:hover {
            background-color: #E57373;
            transform: translateY(-3px) scale(1.02);
        }

        .btn-submit:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* åˆç´„æ²è»¸å€å¡Š */
        .terms-container {
            background-color: #fff;
            border: 2px dashed var(--primary-coral);
            border-radius: 15px;
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #555;
        }

        .article-title {
            color: var(--primary-coral);
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 20px;
            display: block;
        }

        .terms-list {
            padding-left: 20px;
            margin-bottom: 0;
        }

        .final-note {
            font-weight: bold;
            color: #E57373;
            margin-top: 15px;
            text-align: center;
            background-color: var(--soft-pink);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9rem;
        }
        
        .text-danger { color: #dc3545 !important; }
        .hidden { display: none; }

        /* â˜…â˜…â˜… æ‰‹æ©Ÿç‰ˆå°ˆå±¬å„ªåŒ– (RWD) â˜…â˜…â˜… */
        @media (max-width: 768px) {
            .form-container {
                padding: 20px 15px; /* ç¸®å°å·¦å³ç•™ç™½ï¼Œè®“è¼¸å…¥æ¡†è®Šå¯¬ */
                margin-top: 15px;
                border-radius: 15px; /* æ‰‹æ©Ÿç‰ˆåœ“è§’ç¨å¾®å°ä¸€é»æ¯”è¼ƒå¥½çœ‹ */
            }
            
            h2 {
                font-size: 1.5rem; /* æ¨™é¡Œç¸®å° */
            }

            .terms-container {
                height: 250px; /* æ‰‹æ©Ÿç‰ˆåˆç´„æ¡†ç¨å¾®çŸ®ä¸€é»ï¼Œæ‰ä¸æœƒæ»‘ä¸åˆ°åº• */
                padding: 15px;
            }

            /* èª¿æ•´è¤‡é¸æ¡†çš„é–“è·ï¼Œé¿å…æ‰‹æ©Ÿä¸Šæ“ åœ¨ä¸€èµ· */
            .d-flex.gap-3 {
                gap: 0.5rem !important;
            }
            
            .form-check {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-9 col-lg-8"> <div class="form-container">
                <h2 class="text-center">ğŸŒ¸ å¿ƒèªç±³å¯µç‰©ç¾å®¹ ğŸŒ¸</h2>
                <p class="text-center" style="color: var(--primary-coral); font-weight:bold;">
                    Service Agreement & Appointment
                </p>
                <p class="text-center text-muted" style="font-size: 0.9rem;">è«‹å¡«å¯«è©³ç´°è³‡æ–™ä»¥ç¢ºä¿å¯¶è²çš„å®‰å…¨èˆ‡æ¬Šç›Š</p>

                <form id="bookingForm">
                    
                    <h4>ğŸ¾ 1. é£¼ä¸»è³‡æ–™</h4>
                    <div class="row mb-2">
                        <div class="col-12 col-md-6 mb-3"> <label class="form-label">é£¼ä¸»å§“å <span class="text-danger">*</span></label>
                            <input type="text" id="OwnerName" class="form-control" placeholder="è«‹è¼¸å…¥å§“å" required>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <label class="form-label">è¯çµ¡é›»è©± <span class="text-danger">*</span></label>
                            <input type="tel" id="PhoneNumber" class="form-control" placeholder="09xx-xxx-xxx" required>
                        </div>
                    </div>

                    <h4 class="mt-2">ğŸ© 2. å¯µç‰©åŸºæœ¬è³‡æ–™</h4>
                    <div class="row mb-2">
                        <div class="col-12 col-md-6 mb-3">
                            <label class="form-label">å¯µç‰©å§“å <span class="text-danger">*</span></label>
                            <input type="text" id="PetName" class="form-control" required>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <label class="form-label">å“ç¨®</label>
                            <input type="text" id="Breed" class="form-control">
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-6 col-md-4 mb-3"> <label class="form-label">æ€§åˆ¥ <span class="text-danger">*</span></label>
                            <select id="Gender" class="form-select" required>
                                <option value="">è«‹é¸æ“‡...</option>
                                <option value="å…¬">å…¬</option>
                                <option value="æ¯">æ¯</option>
                            </select>
                        </div>
                        <div class="col-6 col-md-4 mb-3">
                            <label class="form-label">æ˜¯å¦çµç´® <span class="text-danger">*</span></label>
                            <select id="IsNeutered" class="form-select" required>
                                <option value="">è«‹é¸æ“‡...</option>
                                <option value="true">æ˜¯</option>
                                <option value="false">å¦</option>
                            </select>
                        </div>
                        <div class="col-12 col-md-4 mb-3">
                            <label class="form-label">é«”é‡ (KG)</label>
                            <input type="number" step="0.1" id="Weight" class="form-control" inputmode="decimal">
                        </div>
                    </div>

                    <h4 class="mt-2">ğŸ¥ 3. å¥åº·èˆ‡å€‹æ€§è²æ˜</h4>

                    <div class="mb-3">
                        <label class="form-label">ç—…å²èˆ‡ç‰¹æ®Šç‹€æ³</label>
                        <textarea id="MedicalDetails" class="form-control" rows="3" placeholder="å¿ƒè‡Ÿç—…/ç™²ç™‡/çš®è†šç—…/éæ•...è‹¥ç„¡è«‹å¡«ç„¡"></textarea>
                    </div>

                    <div class="row mb-3">
                        <div class="col-12 col-md-4 mb-3">
                            <label class="form-label">ç›®å‰æ˜¯å¦ç”¨è—¥ <span class="text-danger">*</span></label>
                            <select id="IsTakingMedication" class="form-select" required>
                                <option value="">è«‹é¸æ“‡...</option>
                                <option value="true">æ˜¯</option>
                                <option value="false">å¦</option>
                            </select>
                        </div>
                        <div class="col-12 col-md-8 hidden" id="divMedicationDetails">
                            <label class="form-label">è«‹èªªæ˜è—¥ç‰©åç¨±æˆ–ç”¨é€”</label>
                            <input type="text" id="MedicationDetails" class="form-control" placeholder="ä¾‹å¦‚ï¼šå¿ƒè‡Ÿç—…è—¥ã€çš®è†šè—¥...">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">å€‹æ€§å‹¾é¸ (å¯è¤‡é¸)</label>
                        <div class="d-flex flex-wrap gap-3"> <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="ç·Šå¼µ" name="personality" id="p1">
                                <label class="form-check-label" for="p1">ç·Šå¼µ</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="å®³æ€•" name="personality" id="p2">
                                <label class="form-check-label" for="p2">å®³æ€•</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="å…·æ”»æ“Šæ€§" name="personality" id="p3">
                                <label class="form-check-label" for="p3">å…·æ”»æ“Šæ€§</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="æ´»æ½‘" name="personality" id="p4">
                                <label class="form-check-label" for="p4">æ´»æ½‘</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="å…¶ä»–" id="chkOther" name="personality">
                                <label class="form-check-label" for="chkOther">å…¶ä»–</label>
                            </div>
                        </div>
                        <input type="text" class="form-control mt-2 hidden" id="txtOther" placeholder="è«‹èªªæ˜å…¶ä»–ç‹€æ³..." style="background-color: var(--soft-pink);">
                    </div>

                    <h4 class="mt-4">âœ‚ï¸ 4. æœå‹™èˆ‡åŒæ„æ¢æ¬¾</h4>

                    <label class="form-label">è©³ç´°æœå‹™å¥‘ç´„</label>
                    <div class="terms-container">
                        <div class="article-title">ç¬¬ä¸€æ¢ã€€å¥‘ç´„ç›®çš„</div>
                        <ol class="terms-list">
                            <li>æœ¬å¥‘ç´„æ—¨åœ¨æ˜ç¢ºè¦ç¯„å§”è¨—äººä¹‹çŠ¬è²“ï¼ˆä»¥ä¸‹ç¨±ã€Œå¯µç‰©ã€ï¼‰æ¥å—ç¾å®¹æœå‹™æœŸé–“ï¼Œé›™æ–¹ä¹‹æ¬Šåˆ©ç¾©å‹™èˆ‡ç›¸é—œæ³¨æ„äº‹é …ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬äºŒæ¢ã€€æœå‹™å…§å®¹èˆ‡è²»ç”¨</div>
                        <ol class="terms-list">
                            <li>å—è¨—äººæä¾›ä¹‹ç¾å®¹æœå‹™åŒ…æ‹¬ä½†ä¸é™æ–¼ï¼šæ´—æ¾¡ã€å‰ªæ¯›ã€å‰ƒæ¯›ã€å»çµã€æ¸…è€³ã€ä¿®æŒ‡ç”²ã€è‚›é–€è…ºæ¸…ç†ç­‰ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬ä¸‰æ¢ã€€å¯µç‰©å¥åº·èˆ‡å®‰å…¨è²æ˜</div>
                        <ol class="terms-list">
                            <li>å§”è¨—äººæ‡‰å¦‚å¯¦å‘ŠçŸ¥å¯µç‰©ä¹‹å¥åº·ç‹€æ³ï¼ˆå«å¿ƒè‡Ÿç—…ã€æ°£å–˜ã€ç™²ç™‡ã€çš®è†šç—…ã€éæ•ã€å‚·å£ã€éª¨éª¼å•é¡Œã€æ”»æ“Šæ€§ã€å’¬äººã€éåº¦ç·Šå¼µç­‰è¡Œç‚ºå•é¡Œç­‰ï¼‰ã€‚</li>
                            <li>é£¼ä¸»ç¢ºèªæ‰€å¡«å¯«ä¹‹å¯µç‰©è³‡æ–™çš†å±¬å¯¦ï¼Œè‹¥æœ‰éš±çç—…å²ã€æ”»æ“Šè¡Œç‚ºæˆ–å…¶ä»–ç‰¹æ®Šç‹€æ³ï¼Œå°è‡´å¯µç‰©æ–¼ç¾å®¹éç¨‹ä¸­ç™¼ç”Ÿæ„å¤–ã€æƒ¡åŒ–ã€å—å‚·ã€æ­»äº¡ï¼Œå—è¨—äººä¸è² è³ å„Ÿè²¬ä»»ã€‚</li>
                            <li>å¹´è€ã€é«˜é½¡ã€ç–¾ç—…ã€æˆ–æƒ…ç·’æ˜“æ¿€å‹•ä¹‹å¯µç‰©æ–¼ç¾å®¹éç¨‹ä¸­å¯èƒ½å¢åŠ é¢¨éšªï¼Œå§”è¨—äººåŒæ„è‡ªè¡Œæ‰¿æ“”ç›¸é—œé¢¨éšªã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬å››æ¢ã€€ç¾å®¹éç¨‹èˆ‡é¢¨éšªèªªæ˜</div>
                        <ol class="terms-list">
                            <li>ç¾å®¹éç¨‹è‹¥éœ€é€²è¡Œæ‹‰çµã€å»æ¯›çƒã€å¤§ç¯„åœæ‰“è–„ç­‰ç‰¹æ®Šè™•ç†ï¼Œå¯èƒ½é€ æˆå¤–è§€ä¸å‡æˆ–çš®è†šæ•æ„Ÿç´…è…«é€ æˆæ”ç™¢éæ•æˆ–å¯µç‰©èºå‹•å°è‡´åˆ®å‚·ã€å‰ªæ¯›ä¸å‡ã€è¼•å¾®æ“¦å‚·ã€æŒ‡ç”²å‡ºè¡€ï¼Œå§”è¨—äººåŒæ„æ­¤å±¬ç¾å®¹éç¨‹å¸¸è¦‹é¢¨éšªã€‚</li>
                            <li>æ¯›å­©è‹¥æœ‰æ‰“çµã€çš®è†šå•é¡Œã€è·³èš¤ã€å£è¨æˆ–å…¶ä»–ç‰¹æ®Šç‹€æ³ï¼Œç¾å®¹æ–¹å¼ï¼ˆå¦‚å‰ƒæ¯›ï¼‰å°‡ç”±ç¾å®¹å¸«ä¾å°ˆæ¥­åˆ¤æ–·è™•ç†ï¼Œé£¼ä¸»åŒæ„ä¸å¾—äº‹å¾Œçˆ­è­°ã€‚</li>
                            <li>è‹¥å¯µç‰©æ–¼ç¾å®¹éç¨‹ä¸­æœ‰æ”»æ“Šè¡Œç‚ºå°è‡´å·¥ä½œäººå“¡å—å‚·ï¼Œå§”è¨—äººæ‡‰è² ç›¸é—œè²¬ä»»ã€‚</li>
                            <li>å—è¨—äººè‹¥ç™¼ç¾å¯µç‰©èº«é«”ç•°å¸¸ï¼ˆè…«å¡Šã€çš®è†šç—…è®Šã€å¤–å‚·ç­‰ï¼‰ï¼Œå¾—ä¸»å‹•å‘ŠçŸ¥ï¼Œä½†ä¸è² é†«ç™‚è²¬ä»»ã€‚</li>
                            <li>è‹¥å¯µç‰©æ–¼ç¾å®¹éç¨‹ä¸­å‡ºç¾æ”»æ“Šã€å¼·çƒˆæŠ—æ‹’ã€éåº¦ç·Šè¿«ï¼Œç‚ºç¢ºä¿äººå“¡èˆ‡å¯µç‰©å®‰å…¨ï¼Œæœ¬åº—æœ‰æ¬Šä¸­æ­¢æœå‹™ï¼Œä¸¦ä¾å¯¦éš›å®Œæˆé …ç›®é…Œæ”¶è²»ç”¨ã€‚</li>
                            <li>è²´é‡ç‰©å“ï¼ˆé …åœˆã€åŠç‰Œã€è¡£ç‰©ç­‰ï¼‰å¦‚æœ‰éºå¤±æˆ–æå£ï¼Œæœ¬åº—æ•ä¸è² è³ å„Ÿè²¬ä»»ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬äº”æ¢ã€€ç·Šæ€¥é†«ç™‚è™•ç†</div>
                        <ol class="terms-list">
                            <li>è‹¥ç¾å®¹éç¨‹ä¸­å¯µç‰©çªç„¶å‡ºç¾ç·Šæ€¥ç‹€æ³ï¼Œå—è¨—äººå¾—ç«‹å³å°‡å¯µç‰©é€å¾€é„°è¿‘ç¸é†«é™¢ã€‚æ‰€æœ‰é†«ç™‚è²»ç”¨ç”±å§”è¨—äººè² æ“”ã€‚</li>
                            <li>å—è¨—äººå°‡ç›¡æœ€å¤§åŠªåŠ›é€šçŸ¥å§”è¨—äººï¼Œä½†åœ¨å±æ€¥æƒ…æ³ä¸‹å¾—å…ˆè¡Œè™•ç†ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬å…­æ¢ã€€æ¥é€è¦ç¯„</div>
                        <ol class="terms-list">
                            <li>å§”è¨—äººæ‡‰æ–¼é€šçŸ¥æ™‚é–“å…§æ¥é€å¯µç‰©ã€‚è¶…æ™‚å°‡ä¾åº—å…§è¦å®šæ”¶å–ç…§é¡§è²»ç”¨ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬ä¸ƒæ¢ã€€ç‰©å“éºå¤±èˆ‡è²¬ä»»é™åˆ¶</div>
                        <ol class="terms-list">
                            <li>å› ä¸å¯æŠ—åŠ›ï¼ˆå¦‚åœ°éœ‡ã€ç«ç½ã€çªç™¼ç–¾ç—…ç­‰ï¼‰é€ æˆå¯µç‰©å‚·äº¡è€…ï¼Œå—è¨—äººä¸è² è³ å„Ÿè²¬ä»»ã€‚</li>
                            <li>è‹¥å› å—è¨—äººé‡å¤§éå¤±å°è‡´å¯µç‰©å—å‚·ï¼Œå—è¨—äººåŒæ„è² åˆç†è²»ç”¨ç¯„åœå…§ä¹‹è²¬ä»»ï¼Œä½†è³ å„Ÿç¸½é¡ä»¥ç¾å®¹è²»ç”¨ä¹‹ä¸‰å€ç‚ºä¸Šé™ã€‚</li>
                        </ol>

                        <div class="article-title">ç¬¬å…«æ¢ã€€å¥‘ç´„ç”Ÿæ•ˆèˆ‡çˆ­è­°è™•ç†</div>
                        <ol class="terms-list">
                            <li>è‹¥é›™æ–¹ç™¼ç”Ÿçˆ­è­°ï¼Œæ‡‰å…ˆä»¥å”å•†æ–¹å¼è™•ç†ï¼›å”å•†ä¸æˆæ™‚ï¼Œä»¥å—è¨—äººç‡Ÿæ¥­æ‰€æ‰€åœ¨åœ°æ³•é™¢ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</li>
                        </ol>

                        <p class="final-note">*æœ¬åŒæ„æ›¸é©ç”¨æ–¼æ—¥å¾Œæ¯æ¬¡ä¾†åº—æœå‹™ï¼Œè‹¥è³‡æ–™æˆ–å¥åº·ç‹€æ³æœ‰ç•°å‹•ï¼Œé£¼ä¸»æ‡‰ä¸»å‹•å‘ŠçŸ¥ã€‚</p>
                    </div>

                    <div class="mb-3 form-check">
                        <input class="form-check-input" type="checkbox" id="PhotoConsent">
                        <label class="form-check-label" for="PhotoConsent">
                            æˆ‘åŒæ„åº—å®¶æ‹æ”å¯µç‰©ç…§ç‰‡ä¸¦æ–¼ç¤¾ç¾¤å¹³å°å…¬é–‹ä½¿ç”¨ã€‚
                        </label>
                    </div>

                    <div class="mb-4 form-check">
                        <input class="form-check-input" type="checkbox" id="IsAgreed" required>
                        <label class="form-check-label text-danger fw-bold" for="IsAgreed">
                            æˆ‘å·²è©³é–±ä¸¦åŒæ„ä¸Šè¿°æ‰€æœ‰æœå‹™æ¢æ¬¾èˆ‡å…è²¬è²æ˜ã€‚
                        </label>
                    </div>

                    <input type="hidden" id="ServiceType" value="æœªæŒ‡å®š">

                    <div class="text-center">
                        <button type="button" class="btn btn-submit" onclick="submitForm()">åŒæ„ä¸¦é ç´„</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // â˜…â˜…â˜… è«‹è¨˜å¾—æ›´æ›æˆä½ çš„ Worker ç¶²å€ â˜…â˜…â˜…
    const API_URL = "https://petsalon-api.zeabur.app/";

    // 1. æ§åˆ¶ã€Œå€‹æ€§-å…¶ä»–ã€è¼¸å…¥æ¡†
    document.getElementById('chkOther').addEventListener('change', function() {
        var txtInput = document.getElementById('txtOther');
        if(this.checked) {
            txtInput.classList.remove('hidden');
            txtInput.focus();
        } else {
            txtInput.classList.add('hidden');
            txtInput.value = '';
        }
    });

    // 2. æ§åˆ¶ã€Œç”¨è—¥èªªæ˜ã€è¼¸å…¥æ¡†
    document.getElementById('IsTakingMedication').addEventListener('change', function() {
        var divDetails = document.getElementById('divMedicationDetails');
        var inputDetails = document.getElementById('MedicationDetails');

        if(this.value === 'true') {
            divDetails.classList.remove('hidden');
            inputDetails.focus();
        } else {
            divDetails.classList.add('hidden');
            inputDetails.value = '';
        }
    });

    // 3. é€å‡ºè¡¨å–®
    async function submitForm() {
        let traits = [];
        document.querySelectorAll('input[name="personality"]:checked').forEach(el => traits.push(el.value));
        const otherTrait = document.getElementById('txtOther').value;
        if (document.getElementById('chkOther').checked && otherTrait) {
            traits = traits.filter(t => t !== 'å…¶ä»–'); 
            traits.push(otherTrait); 
        }

        const data = {
            OwnerName: document.getElementById('OwnerName').value,
            PhoneNumber: document.getElementById('PhoneNumber').value,
            PetName: document.getElementById('PetName').value,
            Breed: document.getElementById('Breed').value,
            Gender: document.getElementById('Gender').value,
            IsNeutered: document.getElementById('IsNeutered').value,
            Weight: document.getElementById('Weight').value ? parseFloat(document.getElementById('Weight').value) : null,
            MedicalDetails: document.getElementById('MedicalDetails').value,
            IsTakingMedication: document.getElementById('IsTakingMedication').value,
            MedicationDetails: document.getElementById('MedicationDetails').value,
            Personality: traits.join(','),
            ServiceType: document.getElementById('ServiceType').value,
            PhotoConsent: document.getElementById('PhotoConsent').checked,
            IsAgreed: document.getElementById('IsAgreed').checked,
            HasMedicalHistory: document.getElementById('MedicalDetails').value.trim() !== "" ? "true" : "false"
        };

        if(!data.OwnerName || !data.PhoneNumber || !data.PetName || !data.Gender || !data.IsNeutered || !data.IsTakingMedication || !data.IsAgreed) {
            alert("è«‹æª¢æŸ¥å¿…å¡«æ¬„ä½ (*) æ˜¯å¦çš†å·²å¡«å¯«ï¼");
            return;
        }

        try {
            const btn = document.querySelector('.btn-submit');
            btn.innerText = "å‚³é€ä¸­...";
            btn.disabled = true;

            const res = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            if (res.ok) {
                alert("ğŸ‰ é ç´„æˆåŠŸï¼æˆ‘å€‘å°‡ç›¡å¿«èˆ‡æ‚¨è¯ç¹«ç¢ºèªæ™‚é–“ã€‚");
                location.reload(); 
            } else {
                const err = await res.json();
                alert("âŒ éŒ¯èª¤ï¼š" + (err.error || "æœªçŸ¥éŒ¯èª¤"));
            }
        } catch (e) {
            console.error(e);
            alert("âŒ é€£ç·šéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¶²è·¯");
        } finally {
            const btn = document.querySelector('.btn-submit');
            btn.innerText = "åŒæ„ä¸¦é ç´„";
            btn.disabled = false;
        }
    }
</script>

</body>
</html>